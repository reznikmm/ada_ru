<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:mtl="http://forge.ada-ru.org/matreshka/template"
      lang="${context.lang}">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
  <meta charset="utf-8"/>
  <meta name="KeyWords" content="Ada programming contest, Турнир по языку Ада"/>
  <meta name="description" content="${context.short_description}"/>
  <meta property="og:url"          content="https://www.ada-ru.org/game/${context.slug}.html"/>
  <meta property="og:title"        content="${context.title}"/>
  <meta property="og:description"  content="${context.short_description}"/>
  <meta property="og:image"        content="https://www.ada-ru.org/game/svg/${context.svg}.svg"/>
  <meta property="og:type"         content="article"/>
  <meta property="og:locale"       content="${context.lang}"/>
  <meta property="fb:app_id"       content="994592483896446"/>
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@ReznikMaxim" />
  <meta name="twitter:title" content="${context.title}" />
  <meta name="twitter:description" content="${context.short_description}" />
  <meta name="twitter:image" content="https://www.ada-ru.org/game/svg/${context.svg}.svg"/>
  <meta name="google-site-verification" content="VFsKvtWDSjtwpDm4ZL9cb2ESsYtiNsAOO3zh-vNjAWY" />
  <title>${context.title} - Ada coding challenges</title>
  <!--- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/graphics/apple-touch-icon.png"/>
  <link rel="icon" type="image/svg+xml" sizes="any" href="/graphics/safari-pinned-tab.svg"/>
  <link rel="icon" type="image/png" sizes="32x32" href="/graphics/favicon-32x32.png"/>
  <link rel="icon" type="image/png" sizes="16x16" href="/graphics/favicon-16x16.png"/>
  <link rel="manifest" href="/manifest.json"/>
  <link rel="mask-icon" href="/graphics/safari-pinned-tab.svg" color="#634421"/>
  <link rel="shortcut icon" href="/favicon.ico"/>
  <meta name="msapplication-TileColor" content="#fffae8"/>
  <meta name="msapplication-config" content="/browserconfig.xml"/>
  <meta name="theme-color" content="#fffae8"/>
  <!--- CSS and Fonts -->
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="../mission.css" type="text/css"/>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous"/>
  <link rel="stylesheet" href="../pure-min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.css" integrity="sha512-jtWR3pdYjGwfw9df601YF6uGrKdhXV37c+/6VNzNctmrXoO0nkgHcS03BFxfkWycOa2P2Nw9Y9PCT9vjG9jkVg==" crossorigin="anonymous" />
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-18973607-5']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</head>
  <body itemscope="itemscope" itemtype="http://schema.org/WebPage">
    <meta itemprop="headline" content="${context.title}" />
    <meta itemprop="inLanguage" content="${context.lang}" />

    <div id="layout">
        <!-- Menu toggle -->
        <input type="checkbox" id="menu_checkbox"/>
        <div id="header">
            <!-- Hamburger icon -->
            <label for="menu_checkbox"><i class="fas fa-bars"></i></label>
        </div>
        <div id="menu">
          <div class="pure-menu">
            <a id="station" class="pure-menu-heading" href="/game/${context.station.slug}.html">
              <img class="station-icon" src="/game/svg/${context.station.svg}.svg" alt="${context.station.name}"/>
              ${context.station.name}
              <br />
              <progress id="station-progress" max="100" value="0"></progress></a>
            <ul class="pure-menu-list">
              <li class="pure-menu-item"><a href="/game/index.html" class="pure-menu-link"><i class="fas fa-home"></i> Home</a></li>
              <li class="pure-menu-item">
                <a class="pure-menu-link" href="${context.slug}-solve.html"><i class="fas fa-flask"></i> Solve It</a>
              </li>
              <li class="pure-menu-item menu-item-divided">
                <input id="known_user" type="checkbox"/>
                <a id="user" class="pure-menu-link" href="#"><i class="fas fa-user"></i> Profile</a>
                <a id="login" class="pure-menu-link" href="/oauth2?path=/game/${context.lang}/${context.slug}.html"><i class="fas fa-sign-in-alt"></i> Login</a>
              </li>
              <li class="pure-menu-item"><a href="/forum" class="pure-menu-link"><i class="fas fa-book-reader"></i> Forum</a></li>
            </ul>
          </div>
          <div id="statistics">
            <hr/>
            Users attempted: <span id="attempted"></span><br/>
            Users succeeded: <span id="succeeded"></span><br/>
            Score for solving: ${context.points}<hr/>
            <i class="fas fa-tachometer-alt"></i> Your score: <span id="my-score">-</span>
          </div>
        </div>
        <div id="main">
            <div class="header">
                <h1><img src="/game/svg/${context.svg}.svg" alt="${context.title}" class="mission-icon"/> ${context.title}</h1>
                <h2>
                    <i class="fas fa-battery-${context.power}"></i> <a href="/game/${context.station.slug}.html">${context.station.name}</a>
                </h2>
            </div>
            <div class="content">
              <p class="content-subhead">
                    <span class="align-right langs">
                        <a href="../en/${context.slug}.html">en</a>
                        <mtl:for expression="lang of context.langs">
                            <a href="../${lang}/${context.slug}.html">${lang}</a>
                        </mtl:for>
                    </span>
              </p>
description_place_holder
              <p class="content-subhead">
                <a href="https://py.checkio.org/blog/how-to-improve-checkio-missions/">How to improve this mission?</a>
                <a href="https://github.com/CheckiO/${context.repo}">https://github.com/CheckiO/${context.repo}</a>
              </p>
              <p>
                  <a class="pure-button pure-button-primary" href="${context.slug}-solve.html"><i class="fas fa-flask"></i> Solve It! (+${context.points})</a>
                  <span class="align-right">
                      <button class="pure-button" id="vote+1"><i class="far fa-plus-square"></i></button>
                      <button class="pure-button" id="vote0">0 <i class="far fa-star"></i></button>
                      <button class="pure-button" id="vote-1"><i class="far fa-minus-square"></i></button>
                  </span>
              </p>
            </div>
        </div>
    </div>    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-core.min.js" integrity="sha512-hqRrGU7ys5tkcqxx5FIZTBb7PkO2o3mU6U5+qB9b55kgMlBUT4J2wPwQfMCxeJW1fC8pBxuatxoH//z0FInhrA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha512-Q3qGP1uJL/B0sEmu57PKXjCirgPKMbg73OLRbTJ6lfHCVU5zkHqmcTI5EV2fSoPV1MHdKsCBE7m/aS6q0pPjRQ==" crossorigin="anonymous"></script>  
    <script src="/js/require.js"/>
    <script>
      require.config({xhtml:false, baseUrl: '/js'});
      require(['logins'], function(logins) { logins.start(); });
    </script>
    <script>
function get_stats(){
      fetch(`$${document.location.protocol}//$${document.location.host}/game/mission?mission=${context.slug}`)
        .then(response => response.json())
        .then(json => {
          document.getElementById('station-progress').max = json.total;
          document.getElementById('station-progress').value = json.solved;
          document.getElementById('station').title = `$${json.solved}/$${json.total}`;
          document.getElementById('vote0').innerText = json.votes;
          document.getElementById('attempted').innerText = json.attempted;
          document.getElementById('succeeded').innerText = json.successed;
          document.getElementById('my-score').innerText = json['my-score'];
        })
};
function bind_vote(vote){
  var data = new FormData();
  data.append('mission', '${context.slug}');
  data.append('vote', vote);
  var options = {
    method: 'POST',
    body: data
  };
  document.getElementById(`vote$${vote}`).onclick=function(){
    var host=`$${document.location.protocol}//$${document.location.host}`;
    fetch(`$${host}/game/mission`, options)
    .then(response => {
      if (response.status == 401) {
        document.location.replace(`$${host}/oauth2?path=$${document.location.pathname}`)
      }else{
        get_stats()
      }
    });
  }
};
bind_vote('-1');
bind_vote('0');
bind_vote('+1');
get_stats();
    </script>
    </body>
</html>